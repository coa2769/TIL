# selact 강좌 소개 및 기본 세팅

[강의 코드 Github](https://github.com/ZeroCho/sleact)

alecture 폴더 : 해당 강좌의 예제

front  : 완성본

back : 백엔드 강좌 예제

multicampus : 예전 비슷한 강좌의 코드

nest-typeorm : backend완성 코드

## 01 backend 구현

이미 구현되어 있다는 가정하에 github에서 코드를 가져와 실행할 수 있도록 설정해준다.

1. back폴더에서 npm i 
   - 에러가 발생한다면 package-lock.json 파일을 삭제하고 npm i를 다시 시도한다.

2. MySQL 설치

3. back 폴더에 .env폴더 생성하여 아래 내용 작성

   ```tex
   COOKIE_SECRET=sleactcooke
   MYSQL_PASSWORD=nodejsbook
   ```

4. DB 생성

   ```bash
   npx sequelize db:create
   ```

5. 임의의 데이터 생성

   ```bash
   npx sequelize db:seed:all
   ```

6. 서버 실행

   ```bash
   npm run dev
   ```

​		DB 연결 성공이라고 뜨면 완료된다.

7. 웹브라우저에서 `localhost:3095`로 접속



# 프론트엔드 세팅하기

setting 폴더에 프론트엔드 세팅이 된 파일이 이미 존재한다. 앞으로의 실습을 하다가 안될 경우 해당 파일을 복사하여 사용한다.

1. 실습 폴더 생성

2. `npm init`으로 프로젝트 초기화

3. 아래의 패키지들 설치

   - react
   - react-dom (react를 웹에 그려주는 도구)
   - typescript
   - @types/react
   - @types/react-dom (react에서 typescript를 사용할 때 필요하다.)

4. 개발 환경 구축에 필요한 패키지 들 설치(`npm i -D`옵션으로 설치 해준다.)

   - eslint(코드의 오타를 잡아준다.)
   - prettier (코드를 내가 지정한 규칙에 맞게 정렬해준다.)
   - eslint-plugin-prettier (elint와 prettier를 연결해준다.)
   - eslint-config-prettier (elint와 prettier를 연결해준다.)

5. eslint와 prettier에 설정을 작성하기 위해 `.prettierrc`와 `.eslintrc`파일을 프로젝트 폴더에 생성

   파일 내용은 `./training`을 참조한다.

6. typescript 설정을 위해 프로젝트 폴더에 `tsconfig.json`파일을 생성한다.

   ```json
   {
     "compilerOptions": {
       "esModuleInterop": true,	//import React from 'react';로 불러올 수 있도록
       "sourceMap": true,          //소스맵을 사용한다.
       "lib": ["ES2020", "DOM"],	
       "jsx": "react",				//jsx파일을 react로 인식한다는 뜻
       "module": "esnext",
       "moduleResolution": "Node",	//import export도 node가 해석할 수 있도록 한다.
       "target": "es5",			//빌드 된 후에는 es5로 변환
       "strict": true,				//타입 체크를 엄격하게
       "resolveJsonModule": true,
       "baseUrl": ".",
       "paths": {
         "@hooks/*": ["hooks/*"],
         "@components/*": ["components/*"],
         "@layouts/*": ["layouts/*"],
         "@pages/*": ["pages/*"],
         "@utils/*": ["utils/*"],
         "@typings/*": ["typings/*"]
       }
     }
   }
   
   ```



# babel과 wabpack 설정하기

1. babel에 관련된 설정을 하기위해 프로젝트 폴더에 `webpack.config.ts`를 생성한다.

   아래는 typescript + react에 필요한 최소한의 설정이다.

   `The keyword 'import' is reserved`에러가 나지만 webpack으로 빌드하는데 아무 문제 없다.

```typescript

import path from 'path';
import webpack, { Configuration as WebpackConfiguration } from "webpack";

const isDevelopment = process.env.NODE_ENV !== 'production';

const config: webpack.Configuration = {
  name: 'sleact',
  mode: isDevelopment ? 'development' : 'production',
  devtool: isDevelopment ? 'hidden-source-map' : 'inline-source-map',
  resolve: {
    extensions: ['.js', '.jsx', '.ts', '.tsx', '.json'], //babel이 처리할 확장자 목록
    //tsconfig.json의 path속성의 내용과 같다.(typescript와 webpack 모두에서 작성해줘야한다.)
    alias: { 
      '@hooks': path.resolve(__dirname, 'hooks'),
      '@components': path.resolve(__dirname, 'components'),
      '@layouts': path.resolve(__dirname, 'layouts'),
      '@pages': path.resolve(__dirname, 'pages'),
      '@utils': path.resolve(__dirname, 'utils'),
      '@typings': path.resolve(__dirname, 'typings'),
    },
  },
  //프로젝트의 시작점
  entry: {
    app: './client',
  },
  module: {
    rules: [
      {
        test: /\.tsx?$/,
        loader: 'babel-loader',
        options: {
          presets: [
            [
              '@babel/preset-env',
              {
                //서비스 지원하는 브라우저
                targets: { browsers: ['last 2 chrome versions'] },
                debug: isDevelopment,
              },
            ],
            '@babel/preset-react',
            '@babel/preset-typescript',
          ],
        },
        exclude: path.join(__dirname, 'node_modules'),
      },
      {
        test: /\.css?$/,
        use: ['style-loader', 'css-loader'],
      },
    ],
  },
  plugins: [
    new webpack.EnvironmentPlugin({ NODE_ENV: isDevelopment ? 'development' : 'production' }),
  ],
  output: {
    path: path.join(__dirname, 'dist'),
    filename: '[name].js',
    publicPath: '/dist/',
  },
};

//개발환경일 때 쓸 플러그인
if (isDevelopment && config.plugins) {
  config.plugins.push(new webpack.HotModuleReplacementPlugin());
}

//개발환경이 아닐 때 쓸 플러그인
if (!isDevelopment && config.plugins) {
}

export default config;

```

2. 필요한 패키지 설치

[ 웹팩 사용을 위해 설치해야 하는 패키지 ] (`npm i -D`옵션으로 설치 해준다.)

- webpack
- @babel/core
- babel-loader
- @babel/preset-env
- @babel/preset-react

[ typescript를 사용하기 위해 설치해야 하는 패키지 ] (`npm i -D`옵션으로 설치 해준다.)

- @types/webpack
- @types/node
- @babel/preset-typescript

[ CSS를 위한 패키지 ] (`npm i -D`옵션으로 설치 해준다.)

- style-loader
- css-loader

3. 빌드된 html을 주입할 html파일 생성 (./training/index.html 참조)

```html
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>슬리액</title>
    <style>
      html, body {
          margin: 0;
          padding: 0;
          overflow: initial !important;
      }
      body {
          font-size: 15px;
          line-height: 1.46668;
          font-weight: 400;
          font-variant-ligatures: common-ligatures;
          -moz-osx-font-smoothing: grayscale;
          -webkit-font-smoothing: antialiased;
      }
      * {
          box-sizing: border-box;
      }
    </style>
    <link rel="stylesheet" href="https://a.slack-edge.com/bv1-8/client-boot-styles.57e47b5.css" crossorigin="anonymous" />
    <link rel="shortcut icon" href="https://a.slack-edge.com/cebaa/img/ico/favicon.ico" />
    <link href="https://a.slack-edge.com/bv1-8/slack-icons-v2-40cccfd.woff2" rel="preload" as="font" crossorigin="anonymous" />
  </head>
  <body>
    <div id="app"></div>
    <script src="./dist/app.js"></script>
  </body>
</html>
```

- 공통으로 적용할 스타일은 해당 파일에 작성한다.
- 검색엔진 최적화, 성능 개선에도 해당 파일이 중요하다.

4. `client.tsx`와 `layouts/App.tsx`를 만들어 테스트할 화면 작성(./training 프로젝트 확인)

4. webpack이 webpack.config.ts를 인식하도록 `tsconfig-for-webpack-config.json`파일을 생성

   ```json
   {
     "compilerOptions": {
       "module": "commonjs",
       "moduleResolution": "Node",
       "target": "es5",
       "esModuleInterop": true
     }
   }
   
   ```

5. 빌드를 하기 위한 명령어를 `package.json`에 추가한다.

   ```json
     "scripts": {
       "build": "cross-env TS_NODE_PROJECT=\"tsconfig-for-webpack-config.json\" webpack",
     },
   ```

6. `npm run build`명령어를 실행하여 빌드한 후 index.html 출력하여 확인한다.



react webpack에  대한 자세한 내용은 [zerocho react 강의](https://www.youtube.com/watch?v=V3QsSrldHqI&list=PLcqDmjxt30RtqbStQqk-eYMK8N-1SYIFn&ab_channel=ZeroChoTV)에서 웹팩 내용을 찾아서 보자.



# 웹팩 데브 서버 세팅하기

프론트에서 수정한 내용을 바로 웹브라우저에서 확인하기위해 웹팩 데브 서버를 세팅한다.(이를 hot reloading 이라한다.)

프록시 서버 역활도 하기 때문에 CROS 에러를 방지할 수 있다.

1. 아래 패키지들 설치(npm i -D 옵션으로)
   - `webpack-dev-server`
   - webpack-cli
   - @types/webpack-dev-server
   - 
2. host reloading을 위한 패키지 설치
   - @pmmmwh/react-refresh-webpack-plugin
   - react-refresh
3. typescript checking과 webpack 빌드를 동시에 돌아가게 하는 패키지 설치(npm i -D 옵션으로)
   - fork-ts-checker-webpack-plugin

4. 

5. index.html을 아래와 같이 수정

   ```html
   <html>
     <head>
       <meta charset="UTF-8">
       <meta name="viewport"
             content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
       <meta http-equiv="X-UA-Compatible" content="ie=edge">
       <title>슬리액</title>
       <style>
         html, body {
             margin: 0;
             padding: 0;
             overflow: initial !important;
         }
         body {
             font-size: 15px;
             line-height: 1.46668;
             font-weight: 400;
             font-variant-ligatures: common-ligatures;
             -moz-osx-font-smoothing: grayscale;
             -webkit-font-smoothing: antialiased;
         }
         * {
             box-sizing: border-box;
         }
       </style>
       <link rel="stylesheet" href="https://a.slack-edge.com/bv1-8/client-boot-styles.57e47b5.css" crossorigin="anonymous" />
       <link rel="shortcut icon" href="https://a.slack-edge.com/cebaa/img/ico/favicon.ico" />
       <link href="https://a.slack-edge.com/bv1-8/slack-icons-v2-40cccfd.woff2" rel="preload" as="font" crossorigin="anonymous" />
     </head>
     <body>
       <div id="app"></div>
       <script src="/dist/app.js"></script>
     </body>
   </html>
   
   ```

   

6. 









# 폴더 구조와 리액트 라우터







# 코드 스플리팅과 이모션







# Q&A (CRA를 안 쓰는 이유)

