# HTTP 상태코드

- 1xx는 거의 사용되지 않는다.

- 디테일한 에러코드 까지 처리하는게 아니라 상위 상태코드에 따라 처리하면된다.
  - 새로운 상태코드가 추가되어도 클라이언트를 변경하지 않아도 된다.





# 2xx - 성공

- 200 OK 
  - 요청 처리 완료

- 201 Created 
  - 요청에 의해 새로운 리소스 생성 완료
  - 생성된 리소스의 URI를 HTTP Header의 Location담아서 보내준다.
- 202 Accepted 
  - 접수는 되었으나 처리가 완료되지 않음
  - 잘 사용되지 않음
- 204 No Content
  - 성공적으로 요청을 처리했지만 응답으로 보낼 데이터가 없을 때
  - ex) 웹 문서 편집기의 save버튼



- 많은 상태코드가 있지만 다 사용되지 않는다.
- 어떤 상태코드를 사용할 지는 팀에서 약속으로 정한다.
  - 실제로 200, 201 정도만 자주 사용된다.

# 3xx - 리다이렉션1

요청 완료를 하기 위해 유저 에이전트의 추가 조치가 필요할 때 



### 리다이렉션

- 종류
  - 영구 리다이렉션
    - 기존의 URL이 더이상 사용되지 않을 때(자동 리다이렉트 흐름 예시)
    - 301 코드
      - 거의 이걸 사용
      - GET
    - 308 코드
      - 거의 사용되지 않음
      - POST (기존의 본문을 유지한채로 보냄. )
  - 일시 리다이렉션
  - 특수 리다이렉션
    - 캐시를 그대로 사용해도 괜찮다는 서버의 응답





# 3xx - 리다이렉션2

### 일시 리다이렉션

- 아래의 3가지 상태코드 모두 기능은 같다.

- 302
  - 요청 메서드 GET으로 변화하고 본문 제거가될 수있음 (MAY 아마도)
- 307
  - 요청 메서드와 본문 유지 (변경 절대 안됨)
- 303
  - 요청 메서드가 GET으로 변경(GET으로 무조건 변경하도록 스펙에서 명확히 표시되어 있음)
- PRG : Post/Redirect/Get
  - POST로 주문 후 웹 브라우저 새로고침하면 요청을 다시 보내게 되어 중복 주문이 될 수 있다.
  - 이를 막기 위해 일시 리다이렉션이 사용된다.
  - POST 요청을 GET으로 리다이렉트한다.
    - PRG 사용 전 예시
    - PRG 사용 후 예시

- 스펙에서는 307, 303을 권장하지만 이미 많은 애플리케이션들이 302를 기본값으로 사용한다.
- 자동 리다이렉션시에 GET으로 변해도 되면 그냥 302를 사용해도 큰 문제 없다.

### 특수 리다이렉션

- 300 
  - 거의 사용되지 않음
- 304
  - 캐시를 사용해도 되는지 서버에 질문하기 위해 사용한다.



# 4xx - 클라이언트 오류, 5xx - 서버 오류

### 4xx(client error)

- 클라이언트의 요청 자체가 잘못되어 있어 서버에서 처리하지 못한다.
- 오류의원인이 클라이언트에 있음
- 해결하기 위해서는 클라이언트의 요청을 수정해서 보내야한다.
- 400
  - 요청 구문, 메시지 등등의 오류
  - 요청 내용 다시 검토
- 401
  - 해당 리소스를 접근하기 위해서는 인증이 필요할 때 생기는 에러
  - 참고
    - 인증 : 본인이 누구인가? (로그인 여부)
    - 인가 : 권한부여(해당 리소스에 접근할 수 있는 권한이 있는가?)

- 403

  - 서버가 요청을 이해했지만 승인을 거부할 때
  - 주로 인증 자격은 증명했지만 접근 권한(인가)이 없는 경우

- 404 

  - 요청 리소스가 서버에 없을 때
  - 또는 클라이언트가 권한이 부족한 리소스에 접근할 때 해당 리소스를 아예 숨기고 싶을 때 사용한다.

  

### 5xx(server error)

- 서버에서 생긴 오류

- 클라이언트가 같은 요청을 여러번 보냈을 때 서버의 상항에 따라 오류가 나지 않을 수 도 있다.(서버가 복구 되거나 등등등)

- 비지니스 로직상에 생기는 예외들을 오류로 표현해서는 안된다.(통장 잔고 부족, 상품 재고 부족 등)

- 서버 내부에 정말 문제가 있을 때만 이런 에러들이 발생해야 한다.(서버 과부화, DB 오류, query 오류 등)

- 500

  - 서버 내부 문제로 오류 발생

- 503

  - 일시적 고가부화 또는 예정된 작업으로 잠시 요청을 처리할 수 없을 때

  

  



