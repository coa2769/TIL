# 모든 것이 HTTP

예전에는 HMTL 을 전송하는 프로토콜로 사용되었지만 현재는 HTML 뿐만 아니라 이미지, 음성, 영상, 파일 등 모든것을 담아서 전송하는 프로토콜로 사용되고 있다.



## HTTP 역사

- HTTP/1.1 1997년 가장 만이 사용되며 가장 중요한 버전이다.
  - 현재의 거의 모든 기능이 가춰진 버전
  - RFC2068 (1997) -> RFC2616 (1999) -> RFC7230 ~ RFC7235 (2014)
  - 인터넷에 나온 내용은 대부분 RFC2616일 것이다. 하지만 우리는 최신 업데이트 버전을 봐야한다.
- HTTP2, 3 버전은 성능 개선에 초점을 맞췄다.



## 기반 프로토콜

- HTTP/1.1, HTTP.2는 TCP 기반으로 동작한다.
- HTTP/3은 UDP 기반으로 동작한다.
- 현재 HTTP/1.1 주로 사용되지만 HTTP/2, HTTP/3도 점점 증가한다.



## HTTP 특징

- 클라이언트 서버 구조로 동작한다.
- 무상태 프로토콜, 비연결성
- HTTP 메시지
- 단순함, 확장 가능





이후에는 각 특징에 대해 자세히 설명한다.

# 클라이언트 서버 구조





클라이언트와 서버를 분리해서 구현하는 것이 매우 중요하다.(예전에는 분리 되어 있지 않았음.)

클라이언트와 서버가 담당하는 부분을 분리하여 작업할고 양쪽이 독립적으로 업데이트가 가능하다.

ex) 클라이언트 -> UI, Design 집중

​		서버 -> 데이터, 비지니스 로직에 집중



# Stateful, Stateless

statefule : 상태를 유지한다.

stateless : 상태를 유지하지 않는다.



HTTP는 무상태 프로토콜이므로 Stateless이다.

서버가 클라이언트의 상태를 보존 하지 않는다.



Stateful과 Stateless 각각의 예제를 정리하자.

예제들을 통해 상태 유지는 중간에 점원이 바뀌면 안되지만 무상태로는 다른 점원으로 바뀌어도 요청 처리가 가능하다.

이런 특징 때문에 무상태는 응답 서버를 쉽게 바꾸는게 가능하기 때문에 무한한 서버 증설이 가능하다.



## Stateless 실무 한계

단순한 서비스 소개 화면에서는 신경쓸 필요가 없지만 상태 유지나 로그인이 필요한 서비스에서는 로그인을 했다는 상태를 유지하기 위한 서버가 필요하다.

일반적으로 브라우저 쿠키와 서버 세션 등을 사용한다.

-> 이렇게 최소한의 상태 유지만 한다.



# 비 연결성(connectionless)

[연결성]

tcp/ip는 연결을 유지하며 통신이 이루어진다. 클라이언트에서 요청이 없어도 계속 연결이 유지되어야 하고 이로 인해 자원이 낭비된다.



[비 연결성]

클라이언트에서 요청이 있을 때만 연결하고 유지하지 않는다. 최소한의 자원만을 이용한다.



## 비 연결성 한계

새로운 연결을 할 때마다 TCP/IP 연결을 새로 맺어야 한다. 

여러 자원을 받을 수 있는데 자원을 받을 때 마다 연결을 해야한다.

현재는 지속 연결을 통해 문제를 해결하고 있다.

HTTP/2, HTTP/3 버전에서는 업데이트가 이루어졌다.



최대한 Stateless하게 설계하여 시작에 딱 맞추어 발생하는 대용량 트래픽에 대비해야 한다.(서버 개발자들이 어려워하는 업무)



# HTTP 메시지

HTTP 메시지 구조

- start-line 시작 라인
  - request-line(요청)과 status-line(응답)이 있다.
  - HTTP 요청 메시지가 중요!!!
  - HTTP 상태 코드 중요!!!
- header 헤더
  - file-name':'(띄어쓰기)내용(띄어쓰기)
  - HTTP 전송에 필요한 모든 부가정보가 들어가 있다.
- empty line 공백 라인(CRLF)
- message body
  - 실제 전송하는 데이터





